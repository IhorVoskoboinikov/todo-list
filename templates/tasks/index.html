{% extends "base.html" %}

{% block content %}
  <div class="jumbotron">
    <h1 class="display-4">TODO List
      <a href="{% url 'task:task-create' %}" class="btn btn-primary link-to-page float-right">
        Add Task
      </a>
    </h1>
    {% if task_list %}
      {% for task in  task_list %}
        <div class="task-item">
          <p><strong>{{ task.content }}</strong>
            {% if task.is_done %}
              <a href="{% url 'task:task-done' pk=task.id %}" class="btn btn-secondary link-to-page float-right">
                Undo
              </a>
              <strong>
                <span class="text-success">(Done)</span>
              </strong>
            {% else %}
              <a href="{% url 'task:task-done' pk=task.id %}" class="btn btn-success link-to-page float-right">
                Complete
              </a>
              <span class="text-danger">
                <strong>(Not done)</strong>
              </span>
            {% endif %}
          </p>
          <p>Create: {{ task.create_at }}</p>
          <p>Tags: {{ task.tags.all|join:", " }}</p>
          <div>
            <a href="{% url 'task:task-update' pk=task.id %}" class="btn btn-primary link-to-page">
              Update
            </a>
            <a href="{% url 'task:task-delete'  pk=task.id %}" class="btn btn-danger link-to-page ml-2">
              Delete
            </a>
          </div>
        </div>
        {% if not forloop.last %}
          <hr class="my-4">
        {% endif %}
      {% endfor %}
    {% else %}
      <p>No tasks</p>
    {% endif %}
  </div>
{% endblock %}
